set nocompatible " vi incompatible mode
set encoding=UTF-8
set cursorline
set nu " line numbering is on
set wrap " line wrap
set lbr  " by word (not by charcter as by default)
set tabstop=4 " tab width measured in spaces
set shiftwidth=4
set autoindent
set expandtab
set colorcolumn=80
" displaying tab characters and trailing spaces
" with special characters \u2592\u2591 and \u2593
" They also may be '>-' and '@':
" :set listchars=tab:>-,trail:@
set lcs=tab:▒░,trail:▓
set list

set foldmethod=indent
set foldlevel=99

" shortcut for paste mode
" http://superuser.com/questions/134709/how-can-i-keep-the-code-formated-as-original-source-when-i-paste-them-to-vim
nnoremap <F2> :set invpaste paste?<CR>
set pastetoggle=<F2>
set showmode

map <c-j> <c-w>j
map <c-k> <c-w>k
map <c-l> <c-w>l
map <c-h> <c-w>h

set fo=tcq1
set hlsearch " highlighting results while searching

set grepprg=ack-grep

set path+=~/repogitories

"some stuff to get the mouse going in term
set mouse=a
set ttymouse=xterm2

" VUNDLE
filetype off
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()

Plugin 'gmarik/Vundle.vim'
Plugin 'SirVer/ultisnips'
Plugin 'Valloric/YouCompleteMe'
Plugin 'davidhalter/jedi-vim'
"Plugin 'klen/python-mode'
"Plugin 'mattn/emmet-vim'
Plugin 'terryma/vim-multiple-cursors'
Plugin 'scrooloose/nerdtree'
Plugin 'jistr/vim-nerdtree-tabs'
Plugin 'majutsushi/tagbar'
Plugin 'scrooloose/syntastic'
Plugin 'Lokaltog/vim-easymotion'
Plugin 'sjl/gundo.vim'
Plugin 'vim-scripts/TaskList.vim'
Plugin 'tomtom/quickfixsigns_vim'
"Plugin 'Lokaltog/powerline'
"Plugin 'bling/vim-airline'
Plugin 'ervandew/screen'
Plugin 'editorconfig/editorconfig-vim'

Plugin 'tpope/vim-surround'
"Plugin 'Raimondi/delimitMate'
Plugin 'kchmck/vim-coffee-script'

Plugin 'godlygeek/csapprox'
" show colors in css files
Plugin 'lilydjwg/colorizer'
Plugin 'vim-scripts/wombat256.vim'
Plugin 'vim-scripts/3DGlasses.vim'
Plugin 'altercation/vim-colors-solarized'
Plugin 'fugalh/desert.vim'
Plugin 'chriskempson/vim-tomorrow-theme'
Plugin 'nanotech/jellybeans.vim'

call vundle#end()
filetype plugin indent on
" VUNDLE END

" NERDTREE and NERDTREETABS
let NERDTreeIgnore=['\.pyc$', '\~$']
" Боковое окно с Nerdtree, если vim запущен без аргументов
autocmd vimenter * if !argc() | NERDTree | endif
map <F3> :NERDTreeTabsToggle<CR>
" NERDTREE and NERDTREETABS END

" TAGBAR
map <F8> :TagbarToggle<CR>
let g:tagbar_autoclose = 1
" TAGBAR END

" POWERLINE
"set rtp+=~/.vim/bundle/powerline/powerline/bindings/vim
"set laststatus=2
" POWERLINE END
" AIRLINE
"set laststatus=2
"let g:airline#extensions#tabline#enabled = 1
"let g:airline_powerline_fonts = 1
"let g:airline_theme='solarized' "'luna'
" AIRLINE END

" SCREEN
let g:ScreenImpl = 'Tmux'
let g:ScreenShellTmuxInitArgs = '-2'
let g:ScreenShellInitialFocus = 'shell'
let g:ScreenShellQuitOnVimExit = 0
noremap <expr> <F5> exists(':ScreenShellVertical') ? ':ScreenShellVertical<CR>' : ':ScreenShellReopen<CR>'
" see http://velvetpulse.com/2012/11/19/improve-your-ruby-workflow-by-integrating-vim-tmux-pry/
"command -nargs=? -complete=shellcmd W  :w | :call ScreenShellSend("load '".@%."';")
"map <Leader>r :w<CR> :call ScreenShellSend("rspec ".@% . ':' . line('.'))<CR>
"map <Leader>e :w<CR> :call ScreenShellSend("cucumber --format=pretty ".@% . ':' . line('.'))<CR>
"map <Leader>b :w<CR> :call ScreenShellSend("break ".@% . ':' . line('.'))<CR>
" SCREEN END

" SYNTASTIC
let g:syntastic_python_checkers=['pyflakes']
let g:syntastic_javascript_checkers=['jslint']
" SYNTASTIC END

" JEDIVIM (autocompletion for Python)
" Отключить автоматический выбор первого элемента из всплывающего списка
let g:jedi#auto_initialization = 0
" JEDIVIM END

" YOUCOMPLETEME and ULTISPNIPS
"let g:ycm_auto_trigger = 0
"let g:ycm_min_num_of_chars_for_completion = 2
let g:ycm_key_list_select_completion = ['CTRL-N', 'Down']
let g:ycm_key_list_previous_completion = ['CTRL-P', 'Up']
let g:ycm_confirm_extra_conf = 1
" https://github.com/Valloric/YouCompleteMe/issues/420#issuecomment-28773618
function! g:UltiSnips_Complete()
    call UltiSnips#ExpandSnippet()
    if g:ulti_expand_res == 0
        call UltiSnips#JumpForwards()
        if g:ulti_jump_forwards_res == 0
           return "\<TAB>"
        endif
    endif
    return ""
endfunction
au BufEnter * exec "inoremap <silent> " . g:UltiSnipsExpandTrigger . " <C-R>=g:UltiSnips_Complete()<cr>"
let g:UltiSnipsJumpForwardTrigger="<tab>"
let g:UltiSnipsJumpBackwardTrigger="<s-tab>"
let g:UltiSnipsListSnippets="<F4>"
" YOUCOMPLETEME and ULTISPNIPS END

" MULTIPLE-CURSORS
"function! Multiple_cursors_before()
"    let g:ycm_auto_trigger = 0
"endfunction
"function! Multiple_cursors_after()
"    let g:ycm_auto_trigger = 1
"endfunction
" MULTIPLE-CURSORS END

" GUNDO
map <leader>g :GundoToggle<CR>
" GUNDO END

" TASKLIST
map <leader>td <Plug>TaskList
" TASKLIST END

" Russian to English key mapping
set langmap=ФИСВУАПРШОЛДЬТЩЗЙКЫЕГМЦЧНЯ;ABCDEFGHIJKLMNOPQRSTUVWXYZ,фисвуапршолдьтщзйкыегмцчня;abcdefghijklmnopqrstuvwxyz

" colors
syntax on " syntax highlighting
syntax enable
let g:solarized_termcolors=256
let g:solarized_bold=1
let g:solarized_italic=1
let g:solarized_underline=1
let g:solarized_contrast="high"
set background=light
"colorscheme solarized
colorscheme jellybeans
"colorscheme desert

" directory where the swap files are stored
set dir=~/.vim/temp/,$HOME/Local\ Settings/Temp
" directory where the backup files are stored
set backupdir=~/.vim/temp/,$HOME/Local\ Settings/Temp

" check if a file has been changed
au CursorHold,BufEnter,WinEnter,BufWinEnter,TabEnter * checktime

nmap gb :buffers<CR>
